{"remainingRequest":"/home/encima/.nvm/versions/node/v11.0.0/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/encima/dev/uzh/shared-components/src/components/LoginForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/encima/dev/uzh/shared-components/src/components/LoginForm.vue","mtime":1573386383384},{"path":"/home/encima/dev/uzh/shared-components/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/encima/.nvm/versions/node/v11.0.0/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/encima/.nvm/versions/node/v11.0.0/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGV9IGZyb20gJ3Z1ZXgnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnTG9naW5Gb3JtJywKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgICBwYXNzd29yZDogJycsCiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLAogICAgICAgICAgICBlcnJvcjogZmFsc2UKICAgICAgICB9CiAgICB9LAogICAgY29tcHV0ZWQ6IG1hcFN0YXRlKHsKICAgICAgICBjdXJyZW50VXNlcjogc3RhdGUgPT4gc3RhdGUuYzNzLnVzZXIuY3VycmVudFVzZXIsCiAgICAgICAgbG9hZGluZzogc3RhdGUgPT4gc3RhdGUuYzNzLnNldHRpbmdzLmxvYWRpbmcsCiAgICB9KSwKICAgIHdhdGNoOiB7CiAgICAgICAgJ2N1cnJlbnRVc2VyJyh0bywgZnJvbSkgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0bykKICAgICAgICAgICAgaWYgKHRvICE9PSBudWxsIHx8IHRvICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIHRoaXMuJHJlZnMuZW1haWwuZm9jdXMoKTsKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgbG9naW4oKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2dpbicpOwogICAgICAgICAgICB0aGlzLmVycm9yID0gbnVsbDsKICAgICAgICAgICAgdGhpcy4kc3RvcmUKICAgICAgICAgICAgICAgIC5kaXNwYXRjaCgnYzNzL3VzZXIvbG9naW4nLCB7dXNlcjoge2VtYWlsOiB0aGlzLmVtYWlsLCBwd2Q6IHRoaXMucGFzc3dvcmR9fSkKICAgICAgICAgICAgICAgIC50aGVuKHVzZXIgPT4gewogICAgICAgICAgICAgICAgICAgIGlmICh1c2VyLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYzNzL3VzZXIvU0VUX0FOT04nLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICdMb2dpbiBmYWlsZWQnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIHJlc2V0KCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygncmVzZXQnKTsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9yZXNldCcpOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["LoginForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"LoginForm.vue","sourceRoot":"src/components","sourcesContent":["<i18n>\n    {\n    \"de\": {\n        \"label-email\": \"Email\",\n        \"label-password\": \"Passwort\",\n        \"button-login\": \"Anmelden\",\n        \"button-forgotten\": \"Passwort vergessen?\"\n    },\n    \"en\": {\n        \"label-email\": \"Email\",\n        \"label-password\": \"Password\",\n        \"button-login\": \"Login\",\n        \"button-forgotten\": \"Forgot Password?\"\n    }\n    }\n</i18n>\n\n\n<template>\n    <div>\n        <form @submit.prevent=\"login\">\n            <div class=\"form-field form-field-block\">\n                <label for=\"email\">{{ $t('label-email') }}</label>\n                <input ref=\"email\" tabindex=\"90\" v-model=\"email\" type=\"email\" name=\"email\" id=\"email\" autocomplete=\"email\" :disabled=\"loading\"/>\n            </div>\n\n            <div class=\"form-field form-field-block\">\n                <label for=\"password\">{{ $t('label-password') }}</label>\n                <input tabindex=\"91\" v-model=\"password\" type=\"password\" id=\"password\" name=\"password\" autocomplete=\"password\"\n                       :disabled=\"loading\"/>\n            </div>\n\n            <div class=\"button-group right-aligned\">\n                <a tabindex=\"93\" @click.prevent=\"reset\" class=\"button button-secondary button-secondary-naked\" :disabled=\"loading\">{{ $t('button-forgotten') }}</a>\n                <button tabindex=\"92\" type=\"submit\" class=\"button button-primary\" :disabled=\"loading || !email || !password\">{{ $t('button-login') }}</button>\n            </div>\n            <div class=\"form-message form-message-error\" v-if=\"error\">\n                <div class=\"icon\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 512 512\">\n                        <path d=\"M322.72,256,422.79,155.93a31.46,31.46,0,0,0,0-44.48L400.55,89.21a31.46,31.46,0,0,0-44.48,0L256,189.28,155.93,89.21a31.46,31.46,0,0,0-44.48,0L89.21,111.45a31.46,31.46,0,0,0,0,44.48L189.28,256,89.21,356.07a31.46,31.46,0,0,0,0,44.48l22.24,22.24a31.46,31.46,0,0,0,44.48,0L256,322.72,356.07,422.79a31.46,31.46,0,0,0,44.48,0l22.24-22.24a31.46,31.46,0,0,0,0-44.48Z\"></path>\n                    </svg>\n                </div>\n                <span class=\"text\">{{error}}</span>\n            </div>\n        </form>\n    </div>\n</template>\n\n<script>\n    import {mapState} from 'vuex'\n\n    export default {\n        name: 'LoginForm',\n        data() {\n            return {\n                email: '',\n                password: '',\n                success: false,\n                error: false\n            }\n        },\n        computed: mapState({\n            currentUser: state => state.c3s.user.currentUser,\n            loading: state => state.c3s.settings.loading,\n        }),\n        watch: {\n            'currentUser'(to, from) {\n                // console.log(to)\n                if (to !== null || to !== undefined) {\n                }\n            }\n        },\n        mounted() {\n            this.$refs.email.focus();\n        },\n        methods: {\n            login() {\n                console.log('login');\n                this.error = null;\n                this.$store\n                    .dispatch('c3s/user/login', {user: {email: this.email, pwd: this.password}})\n                    .then(user => {\n                        if (user.status === 200) {\n                            this.$store.commit('c3s/user/SET_ANON', false);\n                            this.$router.push('/');\n                        } else {\n                            this.error = 'Login failed'\n                        }\n                    })\n            },\n            reset() {\n                console.log('reset');\n                this.$router.push('/reset');\n            }\n        }\n    }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\n\n</style>\n"]}]}